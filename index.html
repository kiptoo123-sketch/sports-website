<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Runner Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; background:#87CEEB; text-align:center; font-family:Arial; }
canvas { display:block; margin:20px auto; border-radius:10px; background:#87CEEB;}
#score,#coins{ font-size:18px; font-weight:bold; margin:5px; }
#restartBtn{
  display:none; padding:10px 20px; font-size:18px;
  border:none; border-radius:8px; background-color:#00c853;
  color:white; cursor:pointer; margin-top:10px;
}
</style>
</head>
<body>

<h2>üèÉ Runner Game</h2>
<canvas id="gameCanvas"></canvas>
<p id="score">Score: 0</p>
<p id="coins">Coins: 0</p>
<p>Tap screen to jump</p>
<button id="restartBtn">Restart</button>

<script>
// Canvas setup
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = 360; canvas.height = 500;

let score=0, coins=0, gameOver=false;

// Player
const player = {x:50,y:400,width:40,height:50,dy:0,gravity:1,jumpPower:-15,onGround:true};

// Jump controls
document.addEventListener("touchstart", jump);
document.addEventListener("keydown", e => { if(e.code==="Space") jump(); });
function jump(){ if(player.onGround){ player.dy=player.jumpPower; player.onGround=false; }}

// Background
let bgX = 0;
const bgSpeed = 2;

// Obstacles
let obstacles = [
  {x:canvas.width, y:420, width:30, height:30, speed:4},
  {x:canvas.width+200, y:420, width:30, height:30, speed:4},
  {x:canvas.width+400, y:420, width:30, height:30, speed:4}
];

// Coins
let coinsArr = [
  {x:canvas.width+150, y:380, width:20, height:20, collected:false},
  {x:canvas.width+350, y:350, width:20, height:20, collected:false},
  {x:canvas.width+550, y:400, width:20, height:20, collected:false}
];

// Restart button
const restartBtn = document.getElementById("restartBtn");
restartBtn.addEventListener("click", ()=>{
  score=0; coins=0; gameOver=false;
  obstacles.forEach((o,i)=>o.x = canvas.width + i*200);
  coinsArr.forEach((c,i)=>{c.x = canvas.width + 150 + i*200; c.collected=false;});
  restartBtn.style.display="none";
  update();
});

// Update loop
function update(){
  if(gameOver){ restartBtn.style.display="inline-block"; return; }

  // Clear canvas
  ctx.fillStyle="#87CEEB";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Scroll background (simple rectangles)
  ctx.fillStyle="#a0e1ff";
  bgX -= bgSpeed;
  if(bgX <= -canvas.width) bgX = 0;
  ctx.fillRect(bgX,0,canvas.width,canvas.height);
  ctx.fillRect(bgX+canvas.width,0,canvas.width,canvas.height);

  // Player physics
  player.dy+=player.gravity; player.y+=player.dy;
  if(player.y>=400){ player.y=400; player.dy=0; player.onGround=true; }

  // Obstacles
  obstacles.forEach(o=>{
    o.x -= o.speed;
    if(o.x<-o.width){ o.x = canvas.width + Math.random()*200; score++; document.getElementById("score").textContent="Score: "+score; if(score%5===0) o.speed += 0.5; }
    ctx.fillStyle="red"; ctx.fillRect(o.x,o.y,o.width,o.height);
    if(player.x<o.x+o.width && player.x+player.width>o.x && player.y<o.y+o.height && player.y+player.height>o.y){
      gameOver=true; alert("Game Over! Score: "+score+" | Coins: "+coins); restartBtn.style.display="inline-block"; return;
    }
  });

  // Coins
  coinsArr.forEach(c=>{
    c.x -= 4;
    if(c.x<-c.width){ c.x=canvas.width + Math.random()*400; c.collected=false; c.y = 300 + Math.random()*100; }
    if(!c.collected){ ctx.fillStyle="gold"; ctx.beginPath(); ctx.arc(c.x+c.width/2, c.y+c.height/2, c.width/2,0,Math.PI*2); ctx.fill(); }
    if(!c.collected && player.x<c.x+c.width && player.x+player.width>c.x && player.y<c.y+c.height && player.y+player.height>c.y){
      coins++; c.collected=true; document.getElementById("coins").textContent="Coins: "+coins;
    }
  });

  // Draw player (blue rectangle)
  ctx.fillStyle="blue";
  ctx.fillRect(player.x,player.y-player.height,player.width,player.height);

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
