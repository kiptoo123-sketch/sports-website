<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Runner Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; background:#87CEEB; text-align:center; font-family:Arial,sans-serif; }
canvas { display:block; margin:10px auto; background:#fff; border-radius:10px; }
button { padding:10px 20px; font-size:16px; border:none; border-radius:8px; background:#00c853; color:#fff; margin:5px; }
#startScreen { position:absolute; top:0; left:0; width:100%; height:100%; background:#87CEEB; display:flex; align-items:center; justify-content:center; flex-direction:column; }
#startScreen button { font-size:20px; padding:15px 30px; }
</style>
</head>
<body>

<h2>üèÉ Runner Game</h2>

<div id="startScreen">
  <p>Tap "Start" to play and enable sound</p>
  <button id="startBtn">Start Game</button>
</div>

<canvas id="game" width="360" height="500" style="display:none;"></canvas>
<p id="score">Score: 0</p>
<p id="coins">Coins: 0</p>
<p>Tap or press SPACE to jump</p>

<button id="restart" style="display:none;">Restart</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score=0, coins=0, gameOver=false;

// --- Sounds ---
let jumpSound, coinSound, overSound;

// --- Player ---
const player = {x:50, y:380, w:40, h:50, dy:0, gravity:0.8, jumpPower:-15, onGround:true};

// --- Obstacle ---
let obstacle = {x:canvas.width, y:410, w:30, h:30, speed:3};

// --- Coin ---
let coin = {x:canvas.width+200, y:330, r:10, taken:false};

// --- Runner image ---
const runnerImg = new Image();
runnerImg.src = "images/runner.png"; // local image file

// --- Initialize sounds on start ---
function initSounds(){
  jumpSound = new Audio("sounds/jump.mp3");
  coinSound = new Audio("sounds/coin.mp3");
  overSound = new Audio("sounds/gameover.mp3");
  [jumpSound, coinSound, overSound].forEach(s=>s.volume=0.6);
}

// --- Jump ---
function jump() {
  if(player.onGround && !gameOver){
    player.dy = player.jumpPower;
    player.onGround=false;
    if(jumpSound) jumpSound.play();
  }
}
document.addEventListener("keydown", e=>{if(e.code==="Space") jump();});
document.addEventListener("touchstart", jump);

// --- Restart ---
document.getElementById("restart").onclick = ()=>location.reload();

// --- Game loop ---
function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Player physics
  player.dy += player.gravity;
  player.y += player.dy;
  if(player.y>=380){player.y=380; player.dy=0; player.onGround=true;}

  // Obstacle
  obstacle.x -= obstacle.speed;
  if(obstacle.x<-obstacle.w){
    obstacle.x = canvas.width + Math.random()*200;
    score++;
    document.getElementById("score").innerText="Score: "+score;
  }

  // Coin
  coin.x -= 3;
  if(coin.x<-10){ coin.x=canvas.width+200; coin.y=300+Math.random()*80; coin.taken=false; }

  // Collision: obstacle
  if(player.x<obstacle.x+obstacle.w && player.x+player.w>obstacle.x &&
     player.y<obstacle.y+obstacle.h && player.y+player.h>obstacle.y){
       gameOver=true;
       if(overSound) overSound.play();
       document.getElementById("restart").style.display="inline-block";
       return;
  }

  // Collision: coin
  if(!coin.taken){
    let dx=player.x+player.w/2-coin.x;
    let dy=player.y+player.h/2-coin.y;
    if(Math.sqrt(dx*dx+dy*dy)<25){
      coin.taken=true;
      coins++;
      document.getElementById("coins").innerText="Coins: "+coins;
      if(coinSound) coinSound.play();
    }
  }

  // Draw player
  if(runnerImg.complete){
    ctx.drawImage(runnerImg, player.x, player.y, player.w, player.h);
  } else {
    ctx.fillStyle="#000";
    ctx.fillRect(player.x, player.y, player.w, player.h);
  }

  // Draw obstacle
  ctx.fillStyle="red"; ctx.fillRect(obstacle.x, obstacle.y, obstacle.w, obstacle.h);
  // Draw coin
  if(!coin.taken){ ctx.fillStyle="gold"; ctx.beginPath(); ctx.arc(coin.x, coin.y, coin.r, 0, Math.PI*2); ctx.fill(); }

  requestAnimationFrame(update);
}

// --- START GAME BUTTON ---
document.getElementById("startBtn").onclick = function() {
  initSounds(); // load sounds on user click
  document.getElementById("startScreen").style.display="none";
  canvas.style.display="block";
  update();
};
</script>
</body>
</html>
